# Little Journey - Development Progress

## 2026-01-14: Core Tab Navigation Setup

**PRD ref:** Phase 1 Weeks 1-2 Foundation, Section 4.1 Primary View

**Task:** Set up 4-tab navigation structure (Feed, Milestones, Search, Settings)

**Decisions:**
- Used index.tsx as Feed tab (Expo Router convention for default route)
- Removed template explore.tsx
- Icons: house.fill (Feed), star.fill (Milestones), magnifyingglass (Search), gearshape.fill (Settings)
- headerShown: true for proper screen titles

**Files changed:**
- app/(tabs)/_layout.tsx - Updated with 4 tabs
- app/(tabs)/index.tsx - Feed screen (renamed from feed.tsx)
- app/(tabs)/milestones.tsx - New placeholder
- app/(tabs)/search.tsx - New placeholder
- app/(tabs)/settings.tsx - New placeholder
- Deleted: app/(tabs)/explore.tsx

**Verification:** tsc, lint, test, build all pass

**Next:** Authentication flow or onboarding screens per PRD Phase 1 Weeks 3-4

## 2026-01-15: Auth Context and Route Protection

**PRD ref:** Phase 1 Weeks 3-4, Section 1 (Auth & Onboarding)

**Task:** Set up auth architecture - context, hooks, route protection, sign-in screen

**Decisions:**
- Created AuthProvider + useAuth hook with mock signIn/signOut (ready for backend integration)
- Used Slot-based routing with useSegments for auth gating (Expo Router pattern)
- Auth screens in (auth) route group, tabs in (tabs) group
- Sign-in screen is placeholder with demo flow - will add magic link/OAuth later
- Primary button color hardcoded (#0a7ea4) to work in light/dark mode

**Files changed:**
- contexts/auth-context.tsx - New: AuthProvider, useAuth hook, User type
- app/_layout.tsx - Wrap with AuthProvider, add RootLayoutNav for auth routing
- app/(auth)/_layout.tsx - New: Auth route group layout
- app/(auth)/sign-in.tsx - New: Sign-in placeholder screen
- __tests__/contexts/auth-context.test.tsx - New: TDD tests for auth context

**Verification:** tsc, lint, test (9 passed), build all pass. UI verified via Chrome MCP.

**Next:** Guided onboarding flow (PRD Section 1.3) or child profile creation

## 2026-01-15: Onboarding Route Group and Flow

**PRD ref:** Phase 1 Weeks 3-4, Section 1.3 (Guided Onboarding Flow)

**Task:** Set up onboarding architecture - route group, routing logic, placeholder add-child screen

**Decisions:**
- Added hasCompletedOnboarding + completeOnboarding to auth context (mock, ready for backend)
- 3-way routing in root layout: auth -> onboarding -> tabs
- Onboarding screens in (onboarding) route group with Stack navigator
- headerBackVisible: false, gestureEnabled: false to prevent back navigation during onboarding
- add-child is first onboarding step (step 2 per PRD, step 1 sign-up already done)

**Files changed:**
- contexts/auth-context.tsx - Added hasCompletedOnboarding, completeOnboarding
- app/_layout.tsx - Updated RootLayoutNav with 3-way routing logic
- app/(onboarding)/_layout.tsx - New: Onboarding route group layout
- app/(onboarding)/add-child.tsx - New: Add child placeholder screen
- app/(auth)/sign-in.tsx - Removed manual router.replace (handled by root layout)
- __tests__/contexts/auth-context.test.tsx - Added 3 tests for onboarding state

**Verification:** tsc, lint, test (12 passed), build all pass. UI verified via Chrome MCP.

**Next:** Child form fields (name, DOB, photo) or remaining onboarding steps (culture, prompt time, invite)

## 2026-01-15: Add Child Form Implementation

**PRD ref:** Phase 1 Weeks 3-4, Section 2.1 (Child Profile)

**Task:** Implement Add Child form with name, DOB, nickname fields and validation

**Decisions:**
- Created ChildContext + useChild hook for child state management (TDD approach)
- Child type: name (required), dateOfBirth (ISO string, required), nickname (optional), photoUri (optional)
- Form validation: name required, DOB required, DOB cannot be future
- Used @react-native-community/datetimepicker for native date picking
- Continue button disabled until form valid (visual feedback via gray color)
- Date displayed in Singapore locale format (en-SG)
- KeyboardAvoidingView + ScrollView for proper keyboard handling

**Files changed:**
- contexts/child-context.tsx - New: ChildProvider, useChild hook, Child type
- app/_layout.tsx - Added ChildProvider wrapper
- app/(onboarding)/add-child.tsx - Full form implementation with validation
- __tests__/contexts/child-context.test.tsx - New: 5 TDD tests for child context

**Verification:** tsc, lint, test (17 passed), build all pass. UI verified via Chrome MCP.

**Next:** Remaining onboarding steps (culture selection, prompt time, invite family) or photo picker for child
